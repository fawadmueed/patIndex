
<!DOCTYPE html>
<head>

  <!-- Standard Meta -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Axxium | Sans-papier</title>

  <meta name="description" content="A menu is a collection of elements showing related user actions" />
  <meta name="keywords" content="html5, ui, library, framework, javascript" />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Open+Sans:300italic,400,300,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" class="ui" href="dist/semantic.min.css">
  <link rel="stylesheet" type="text/css" class="ui" href="css/axxium.css">

  <script src="patients.js"></script>
  <script src="antecedents.js"></script>
  <script src="examens.js"></script>
  <script src="plan.js"></script>
  <script src="traitements.js"></script>
  <script src="documents.js"></script>
  <script src="odonto.js"></script>

  <script src="javascript/library/jquery.min.js"></script>
  <script src="javascript/library/history.js"></script>
  <script src="javascript/library/easing.js"></script>
  <script src="javascript/library/ace/ace.js"></script>
  <script src="javascript/library/tablesort.js"></script>
  <script src="javascript/library/waypoints.js"></script>
  <script src="dist/semantic.min.js"></script>

  <script src="jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.11/js/dataTables.semanticui.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.11/css/dataTables.semanticui.min.css">

  <script>

  function getLang()
  {
    var regexS = "[\\?&]lang=([^&#]*)";
    var regex = new RegExp( regexS );
    var results = regex.exec( window.location.href );
    if( results == null )
      return "fr";
    else
      return results[1];
  }

  </script>

</head>
<body id="example">

  <div class="example">
	<div class="ui segment">
      <h2 class="ui header">
   		<img id="topLogo" class="ui left floated image" src="images/headerimg.png">
        <div id="topTitle" class="ui content">
          <h2 id="patName">Centre dentaire Sirois<br></h2>
        </div>
        <div class="ui right float content" id="updateAvail">
        </div>
      </h2>
    </div>

<div class="container">

    <div class="ui axxium tabular inverted menu">
			    <div class="active item" data-tab="patient"><i class="user icon"></i>Patient</div>
			    <div class="item" data-tab="antecedents"><i class="heartbeat icon"></i>Antécédents</div>
			    <div class="item" data-tab="examens"><i class="user icon"></i>Examens</div>
			    <div class="item" data-tab="odonto"><i class="doctor icon"></i>Odontogramme</div>
			    <div class="item" data-tab="plan"><i class="list icon"></i>Plan</div>
			    <div class="item" data-tab="traitements"><i class="treatment icon"></i>Traitements</div>
			    <div class="item" data-tab="documents"><i class="treatment icon"></i>Documents</div>
    </div>

     <div class="ui bottom attached active tab segment" data-tab="patient">
    	<div class="ui axxium form segment">
    	    <div class="field">
    	      <label>Numéro de patient</label>
    	      <input id="EID" type="text">
    	    </div>
    	    <div class="field">
    	      <label>Prénom du patient</label>
    	      <input id="Efirst" type="text">
    	    </div>
    	    <div class="field">
    	      <label>Nom du patient</label>
    	      <input id="Elast" type="text">
    	    </div>
    	    <div class="field">
    	      <label>NAM</label>
    	      <input id="ENAM" type="text">
    	    </div>
    	    <div class="field">
    	      <label>Date de naissance</label>
    	      <input id="Ebirth" type="text">
    	    </div>
    	</div>
    </div>

     <div class="ui bottom attached tab segment" data-tab="antecedents">
    	<div class="ui one column grid">
    	  <div class="row">
    	    <div class="column">
			    <table id="fileList" class="ui axxium striped compact table segment">
			      <thead>
			        <th class="one wide">ID</th>
			        <th class="seven wide">Question</th>
			        <th class="four wide">Réponse</th>
			        <th class="four wide">Modifications</th>
			      </thead>
			      <tbody id="eachAnt">
			      </tbody>
    			</table>
    	   	</div>
    	  </div>
    	</div>
    </div>

     <div class="ui bottom attached tab segment" data-tab="examens">
    	<div class="ui one column grid">
    	  <div class="row">
    	    <div class="column">
			    <table id="fileList" class="ui axxium striped compact table segment">
			      <thead>
			        <th class="one wide">ID</th>
			        <th class="seven wide">Question</th>
			        <th class="four wide">Réponse</th>
			        <th class="four wide">Modifications</th>
			      </thead>
			      <tbody id="eachExa">
			      </tbody>
    			</table>
    	   	</div>
    	  </div>
    	</div>
    </div>

     <div class="ui bottom attached tab segment" data-tab="plan">
     	<div class="ui axxium small right floated button">Calendrier Vision-R</div>
    	<div class="ui one column grid">
    	  <div class="row">
    	    <div class="column">
			    <table id="planList" class="ui axxium sortable striped compact table segment">
			      <thead>
			        <th class="one wide">Code</th>
			        <th class="one wide">Dent</th>
			        <th class="one wide">Surf.</th>
			        <th class="six wide">Description</th>
			        <th class="two wide">Prix</th>
			        <th class="two wide">Rendez-vous</th>
			      </thead>
			      <tbody id="eachPlan">
			      </tbody>
    			</table>
    	   	</div>
    	  </div>
    	</div>
    </div>

     <div class="ui bottom attached tab segment" data-tab="traitements">
     	<div class="ui axxium small right floated button">Facturation Vision-R</div>
    	<div class="ui one column grid">
    	  <div class="row">
    	    <div class="column">
			    <table id="traitList" class="ui axxium striped compact table segment">
			      <thead>
			        <th class="one wide">Code</th>
			        <th class="one wide">Dent</th>
			        <th class="one wide">Surf.</th>
			        <th class="five wide">Description</th>
			        <th class="five wide">Commentaires</th>
			        <th class="two wide">Prix</th>
			      </thead>
			      <tbody id="eachTrait">
			      </tbody>
    			</table>
    	   	</div>
    	  </div>
    	</div>
    </div>

     <div class="ui bottom attached tab segment" data-tab="documents">
     	<div class="ui axxium small right floated button">Ajouter un document</div>
    	<div class="ui one column grid">
    	  <div class="row">
    	    <div class="column">
			    <table id="docList" class="ui axxium striped compact table segment">
			      <thead>
			        <th class="one wide">Seq</th>
			        <th class="three wide">Doc</th>
			        <th class="one wide">Date</th>
			        <th class="five wide">Commentaires</th>
			      </thead>
			      <tbody id="eachDoc">
			      </tbody>
    			</table>
    	   	</div>
    	  </div>
    	</div>
    </div>

	<div class="ui bottom attached tab segment" data-tab="odonto">
	      <div class="ui grid">
	          <div class="nine wide column">
					<canvas id="odonto" width="600" height="395" style="border:1px solid #c3c3c3;">
								Your browser does not support the HTML5 canvas tag.
					</canvas>
	          </div>
	          <div class="seven wide column">
	          <div class="ui top attached tabular menu">
			    <div class="active item" data-tab="eb">En bouche</div>
			    <div class="item" data-tab="af">À faire</div>
			    <div class="item" data-tab="as">À surveiller</div>
			  </div>
			  <div class="ui bottom attached active tab segment" data-tab="eb">
	          	<table class="ui compact table">
	  				<thead>
	  				  <tr>
	  					<th><h4>Code</h4></th>
	  				    <th><h4>Dent</h4></th>
	  					<th><h4>Surf.</h4></th>
	  					<th><h4>Description</h4></th>
	  				  </tr>
	  				</thead>
	  				<tbody id="ebList">
	  				</tbody>
				</table>
			  </div>
			  <div class="ui bottom attached tab segment" data-tab="af">
	          	<table class="ui compact table">
	  				<thead>
	  				  <tr>
	  					<th><h4>Code</h4></th>
	  				    <th><h4>Dent</h4></th>
	  					<th><h4>Surf.</h4></th>
	  					<th><h4>Description</h4></th>
	  				  </tr>
	  				</thead>
	  				<tbody id="afList">
	  				</tbody>
				</table>
			  </div>
			  <div class="ui bottom attached tab segment" data-tab="as">
	          	<table class="ui compact table">
	  				<thead>
	  				  <tr>
	  					<th><h4>Code</h4></th>
	  				    <th><h4>Dent</h4></th>
	  					<th><h4>Surf.</h4></th>
	  					<th><h4>Description</h4></th>
	  				  </tr>
	  				</thead>
	  				<tbody id="asList">
	  				</tbody>
				</table>
			  </div>
	     </div>
     </div>

</div>

	<div class="ui modalSearch modal">
	  <i class="close icon"></i>
	  <div class="header">
	    <i class="user icon"></i>Rechercher un patient
	  </div>
	  <div class="modSearch content">
    	<div class="ui axxium form segment">
    		<div class="ui one column grid">
    		  <div class="row">
    		    <div class="column">
    		    	<font size=3>
					    <table id="patList" class="ui celled table" cellspacing="0" width="100%">
					      <thead>
					        <th>Numéro</th>
					        <th>Nom</th>
					        <th>Prénom</th>
					        <th>NAM</th>
					        <th>Date de naissance</th>
					      </thead>
					      <tbody id="eachPat">
					      </tbody>
    					</table>
    				</font>
    		   	</div>
    		  </div>
    		</div>
    	</div>
	  </div>
	</div>

	<div class="ui modalNote modal">
	  <i class="close icon"></i>
	  <div class="header">
	    <i class="user icon"></i>Notes et corrections
	  </div>
	  <div class="modNote content">
    	<div class="ui axxium inverted form segment">
    	    <div class="field">
    	      <label>Entrez une note ou une correction</label>
    	      <input id="Enote" type="text">
    	    </div>
	      <div class="ui submit button">Valider</div>
    	</div>
	  </div>
	</div>

	<div class="ui modalNote2 modal">
	  <i class="close icon"></i>
	  <div class="header">
	    <i class="user icon"></i>Notes et corrections
	  </div>
	  <div class="modNote2 content">
    	<div class="ui axxium inverted form segment">
    	    <div class="field">
    	      <label>Entrez une note ou une correction</label>
    	      <input id="Enote2" type="text">
    	    </div>
	      <div class="ui submit button">Valider</div>
    	</div>
	  </div>
	</div>

	<div class="ui modalOne modal">
	  <br><br>
	  <div class="ui grid">
	  	<div class="one wide column">
	  	</div>
	  	<div class="eight wide column">
			<div id="theTooth1" class="field">
			  <font size=6></font>
			</div>
			<br>
	  		<div class="field">
	  			<font size=6><textarea rows="2" cols="42" id="text42"></textarea></font>
	  		</div>
	  	</div>
	  </div>
	  <div class="ui grid">
	  	<div class="one wide column">
	  	</div>
	  	<div class="two wide column">
	  			<div class="ui axxium large fluid button" onclick='setM();' id="butM"><font size=6>M</font></div>
  				<br><br>
	  			<div class="ui axxium large fluid button" onclick='setL();' id="butL"><font size=6>L</font></div>
  				<br><br>
	  			<div class="ui axxium large fluid button" onclick='setD();' id="butD"><font size=6>D</font></div>
  				<br><br>
	  			<div class="ui axxium large fluid button" onclick='setB();' id="butB"><font size=6>B</font></div>
  				<br><br>
	  			<div class="ui axxium large fluid button" onclick='setO();' id="butO"><font size=6>O</font></div>
  				<br><br>
  				<br><br>
	  	</div>
	  	<div class="one wide column">
	  	</div>
	  	<div class="five wide column">
  <div class="ui search">
    <div class="ui icon input">
      <input class="prompt" type="text" placeholder="Rechercher..." id="searchField">
      <i class="search icon"></i>
    </div>
    <div class="results"></div>
  </div>
  				<br><br>
  				<br><br>
	  			<div class="ui axxium large fluid button" onclick='setAmal();' id="butAmal"><font size=5>Amalgame</font></div>
  				<br><br>
	  			<div class="ui axxium large fluid button" onclick='setComp();' id="butComp"><font size=5>Composite</font></div>
  				<br><br>
	  			<div class="ui axxium large fluid button" onclick='set1();' id="butOr"><font size=5>Examen complet</font></div>
  				<br><br>
	  			<div class="ui axxium large fluid button" onclick='set2();' id="butRes"><font size=5>Examen de rappel</font></div>
  				<br><br>
	  	</div>
	  	<div class="one wide column">
	  	</div>
	  	<div class="six wide column">
	  		<div class="modNum content">
  				<div class="ui axxium large button" onclick='keyEntry(1);'><font size=8>1</font></div>
  				<div class="ui axxium large button" onclick='keyEntry(2);'><font size=8>2</font></div>
  				<div class="ui axxium large button" onclick='keyEntry(3);'><font size=8>3</font></div>
  				<br><br>
  				<div class="ui axxium large button" onclick='keyEntry(4);'><font size=8>4</font></div>
  				<div class="ui axxium large button" onclick='keyEntry(5);'><font size=8>5</font></div>
  				<div class="ui axxium large button" onclick='keyEntry(6);'><font size=8>6</font></div>
  				<br><br>
  				<div class="ui axxium large button" onclick='keyEntry(7);'><font size=8>7</font></div>
  				<div class="ui axxium large button" onclick='keyEntry(8);'><font size=8>8</font></div>
  				<div class="ui axxium large button" onclick='keyEntry(9);'><font size=8>9</font></div>
  				<br><br>
  				<div class="ui axxium large button" onclick='keyEntry(-1);'><font size=8><</font></div>
  				<div class="ui axxium large button" onclick='keyEntry(0);'><font size=8>0</font></div>
  				<div class="ui axxium large button" onclick='keyEntry(-2);'><font size=8>c</font></div>
  				<br><br>
  				<br><br>
	  		  	<div id="existTxt" class="ui axxium large button" onclick='acceptVal1(0);'><font size=5>EB</font></div>
	  		  	<div id="existTxt" class="ui axxium large button" onclick='acceptVal1(1);'><font size=5>AF</font></div>
	  		  	<div id="existTxt" class="ui axxium large button" onclick='acceptVal1(2);'><font size=5>AS</font></div>
  				<br><br>
	  		  	<div id="clearTxt" class="ui axxium large button" onclick='clearVal1();'><font size=5>Cancel</font></div>
  				<br><br><br><br>
	  		</div>
	  	</div>
	  </div>
	</div>

	<script>

	function addNotes(aNum)
	{
		modalNum = aNum;
        //alert(modalNum);
		document.getElementById("Enote").value = "";
		$('.modalNote.modal').modal('show');
	}

	$('.modNote.content .ui.form')
		    .form({
		        just: {
		          identifier  : 'Enote',
		          rules: [
		            {
		              type   : 'empty',
		              prompt : 'Entrez une note ou une correction'
		            }
		          ]
		        }
		      }, { inline : true,
        			onSuccess : function() {
            		//alert(modalNum);
            		document.getElementById("n"+modalNum).setAttribute("class", "ui axxium large right floated");
            		document.getElementById("n"+modalNum).setAttribute("onclick", "");
            		document.getElementById("n"+modalNum).innerHTML = "<b>" + document.getElementById("Enote").value + "</b>"  + '<div id="n'+extID+'" class="ui axxium large right floated button" onclick="addNotes(\''+extID+'\');">Notes</div></td>';
            		if (qJSON[modalNum].qEdits.length > 0)
            			{
            				qJSON[modalNum].qEdits = qJSON[modalNum].qEdits + "<br>" + document.getElementById("Enote").value;
            			}
            		else
            			{
            				qJSON[modalNum].qEdits = document.getElementById("Enote").value;
            			}
            		uploadANT(qFile);
            		$('.modalNote.modal').modal('hide');
        } })
    ;

	function addNotes2(aNum)
	{
		modalNum2 = aNum;
        //alert(modalNum2);
		document.getElementById("Enote2").value = "";
		$('.modalNote2.modal').modal('show');
	}

	$('.modNote2.content .ui.form')
		    .form({
		        just: {
		          identifier  : 'Enote2',
		          rules: [
		            {
		              type   : 'empty',
		              prompt : 'Entrez une note ou une correction'
		            }
		          ]
		        }
		      }, { inline : true,
        			onSuccess : function() {
            		//alert(modalNum2);
            		document.getElementById("m"+modalNum2).setAttribute("class", "ui axxium large right floated");
            		document.getElementById("m"+modalNum2).setAttribute("onclick", "");
            		document.getElementById("m"+modalNum2).innerHTML = "<b>" + document.getElementById("Enote2").value + "</b>"  + '<div id="n'+extIDexa+'" class="ui axxium large right floated button" onclick="addNotes2(\''+extIDexa+'\');">Notes</div></td>';
            		if (qEXA[modalNum2].qEdits.length > 0)
            			{
            				qEXA[modalNum2].qEdits = qEXA[modalNum2].qEdits + "<br>" + document.getElementById("Enote2").value;
            			}
            		else
            			{
            				qEXA[modalNum2].qEdits = document.getElementById("Enote2").value;
            			}
            		uploadEXA(qFileExa);
            		$('.modalNote2.modal').modal('hide');
        } })
    ;

	</script>

  <script>

  var lang = getLang();
  var curPatient = "";
  var curAnt = 0;
  var curExa = 0;
  var curPlan = 0;
  var tracks42 = "";
  var aTooth = 0;
  var trait = 0;
  var isM = false;
  var isL = false;
  var isD = false;
  var isB = false;
  var isO = false;
  var mapping = "";
  var odonto = "";
  var searchItems = "";
  var qFile = "";
  var qFileExa = "";
  var qFilePlan = "";
  //var firstJSON = getJSON();
  var modalNum = 0;
  var extID;
  var extIDexa;
  var allJSONs = "";
  var allEXAMSs = "";
  var qCODES = "";
  var qJSON = "";
  var qANT = "";
  var qEXAMS = "";
  var qEXA = "";
  var qPAT = "";
  var qPLANS = "";
  var qPLA = "";

  $('document').ready(function(){
  	$('.menu .item')
  		.tab()
	;
	$('.sortable.table').tablesort();
  	loadPAT();
  });

  $(document).on('click', function(evt) {
    if (evt.target.getAttribute('id') == "odonto")
    	{
    		aTooth = getTooth(evt.clientX, evt.clientY);
    		//alert(aTooth);
    		document.getElementById("theTooth1").innerHTML = "<font size=6>Dent "+aTooth+"</font>";
    		document.getElementById("text42").disabled=true;
    		$('.modalOne.modal').modal('show');
    	}
  });

  </script>

</body>
</html>