
<!DOCTYPE html>
<head>

  <!-- Standard Meta -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Axxium | Sans-papier</title>

  <meta name="description" content="A menu is a collection of elements showing related user actions" />
  <meta name="keywords" content="html5, ui, library, framework, javascript" />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Open+Sans:300italic,400,300,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" class="ui" href="css/dist/semantic.min.css">
  <link rel="stylesheet" type="text/css" class="ui" href="css/axxium.css">

  <script src="javascript/library/jquery.min.js"></script>
  <script src="javascript/library/history.js"></script>
  <script src="javascript/library/easing.js"></script>
  <script src="javascript/library/ace/ace.js"></script>
  <script src="javascript/library/tablesort.js"></script>
  <script src="javascript/library/waypoints.js"></script>
  <script src="javascript/dist/semantic.min.js"></script>

  <script src="javascript/axxium/patients15.js"></script>
  <script src="javascript/axxium/antecedents15.js"></script>
  <script src="javascript/axxium/questionnaire15.js"></script>
  <script src="javascript/axxium/examens15.js"></script>
  <script src="javascript/axxium/plans15.js"></script>
  <script src="javascript/axxium/ententes15.js"></script>
  <script src="javascript/axxium/traitements15.js"></script>
  <script src="javascript/axxium/ordonnances15.js"></script>
  <script src="javascript/axxium/documents15.js"></script>
  <script src="javascript/axxium/odonto15.js"></script>
  <script src="javascript/jSignature.min.js"></script>
  <script src="javascript/pdf/pdf.js"></script>
  <script src="javascript/pdf/jspdf.min.js"></script>

  <script src="javascript/tables/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.11/js/dataTables.semanticui.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.11/css/dataTables.semanticui.min.css">

  <script>

  function getLang()
  {
    var regexS = "[\\?&]lang=([^&#]*)";
    var regex = new RegExp( regexS );
    var results = regex.exec( window.location.href );
    if( results == null )
      return "fr";
    else
      return results[1];
  }

  </script>

</head>
<body id="example">

  <div class="example">
	<div class="ui segment">
      <h2 class="ui header">
   		<img id="topLogo" class="ui mini left floated image" src="images/headerimg.png">
        <div id="topTitle" class="ui content">
          <h2 id="patName">JS&nbsp;&nbsp;&nbsp;<div class="ui axxium tiny button" onclick="reOpenSearch();">Changer de patient</div></h2>
        </div>
        <br>
      </h2>
    </div>
  	  <div id="loadingText" class="ui active inverted dimmer">
  	    <div class="ui text loader">Chargement initial des données...</div>
  	  </div>

<div class="container">

    <div class="ui top attached tabular menu">
		<div class="active item" data-tab="patient"><i class="user icon"></i>Patient</div>
		<div class="item" data-tab="antecedents"><i class="heartbeat icon"></i>Historique</div>
		<div class="item" data-tab="examens"><i class="doctor icon"></i>Examen</div>
		<div class="item" data-tab="odontos"><i class="crosshairs icon"></i>Odonto</div>
		<div class="item" data-tab="plans"><i class="list icon"></i>Plan</div>
		<div class="item" data-tab="ententes"><i class="thumbs up icon"></i>Entente</div>
		<div class="item" data-tab="traitements"><i class="treatment icon"></i>Traitements</div>
		<div class="item" data-tab="ordonnances"><i class="lab icon"></i>Rx</div>
		<div class="item" data-tab="documents"><i class="file image outline icon"></i>Documents</div>
    </div>
    	<div class="ui divider"></div>
    	<div class="ui content" id="updateAvail">
    	</div>

     <div class="ui bottom attached active tab segment" data-tab="patient">
    	<div class="ui two column grid">
    	  <div class="row">
    	    <div class="six wide column">
     			<img id="patPhoto" class="ui fluid rounded image" src="json/images/square-image.png">
     			<br><label>Changer la photo: <input type="file" accept="image/*" id="photoCapture" capture="camera" onchange="uploadPhoto()"></label>
    	    </div>
    	    <div class="column">
    			<div class="ui axxium form segment">
    			  <div class="two fields">
    			    <div class="field">
    			      <label>Nom du patient</label>
    			      <input id="Elast" readonly="" type="text">
    			    </div>
    			    <div class="field">
    			      <label>Prénom du patient</label>
    			      <input id="Efirst" readonly="" type="text">
    			    </div>
    			  </div>
    			  <div class="three fields">
    			    <div class="field">
    			      <label>Numéro de dossier</label>
    			      <input id="EID" readonly="" type="text">
    			    </div>
    			    <div class="field">
    			      <label>NAM</label>
    			      <input id="ENAM" readonly="" type="text">
    			    </div>
    			    <div class="field">
    			      <label>Date de naissance</label>
    			      <input id="Ebirth" readonly="" type="text">
    			    </div>
    			  </div>
    			    <div class="field">
    			      <label>Alerte médicale</label>
    			      <textarea id="Ealert" rows="3" readonly=""></textarea>
    			    </div>
    			    <div class="field">
    			      <label>Suivi médical</label>
    			      <textarea id="Esuivi" rows="3" readonly=""></textarea>
    			    </div>
		    	</div>
    	    </div>
    	  </div>
    	</div>
    </div>

     <div class="ui bottom attached tab segment" data-tab="antecedents">
    	<div class="ui one column grid">
    	  <div class="row">
    	    <div class="column">
			    <table id="antList" class="ui axxium striped compact table segment">
			      <thead>
			        <th class="one wide">ID</th>
			        <th class="four wide">Question</th>
			        <th class="four wide">Réponse</th>
			        <th class="five wide">Notes cliniques</th>
			        <th class="two wide">Ajouter</th>
			      </thead>
			      <tbody id="eachAnt">
			      </tbody>
    			</table>
    	   	</div>
    	  </div>
    	</div>
    	<div class="ui two column grid">
    	  <div class="row">
    	    <div class="four wide column">
   				<img id="sigBelowANT0" class="ui left floated medium image">
   			</div>
    	    <div class="four wide column">
   				<img id="sigBelowANT1" class="ui left floated medium image">
   			</div>
   		  </div>
    	  <div class="row">
    	    <div class="four wide column">
    	    	<label id="dateBelowANT0"></label>
   			</div>
    	    <div class="four wide column">
    	    	<label id="dateBelowANT1"></label>
   			</div>
   		  </div>
   		</div>
    </div>

     <div class="ui bottom attached tab segment" data-tab="examens">
    	<div class="ui one column grid">
    	  <div class="row">
    	    <div class="column">
			    <table id="exaList" class="ui axxium striped compact table segment">
			      <thead>
			        <th class="one wide">ID</th>
			        <th class="four wide">Question</th>
			        <th class="four wide">Réponse</th>
			        <th class="five wide">Notes cliniques</th>
			        <th class="two wide">Ajouter</th>
			      </thead>
			      <tbody id="eachExa">
			      </tbody>
    			</table>
    	   	</div>
    	  </div>
    	</div>
    	<div class="ui two column grid">
    	  <div class="row">
    	    <div class="four wide column">
   				<img id="sigBelowEXA0" class="ui left floated medium image">
   			</div>
    	    <div class="four wide column">
   				<img id="sigBelowEXA1" class="ui left floated medium image">
   			</div>
   		  </div>
    	  <div class="row">
    	    <div class="four wide column">
    	    	<label id="dateBelowEXA0"></label>
   			</div>
    	    <div class="four wide column">
    	    	<label id="dateBelowEXA1"></label>
   			</div>
   		  </div>
   		</div>
    </div>

     <div class="ui bottom attached tab segment" data-tab="plans">
    	<div class="ui one column grid">
    	  <div class="row">
    	    <div class="column">
			    <table id="planList" class="ui axxium sortable striped compact table segment">
			      <thead>
			      	<th class="one wide"><i class="remove icon"></i></th>
			        <th class="one wide">Code</th>
			        <th class="one wide">Dent</th>
			        <th class="one wide">Surf.</th>
			        <th class="four wide">Description</th>
			        <th class="one wide">Mod.</th>
			        <th class="one wide">Unités</th>
			        <th class="one wide">Prix</th>
			        <th class="five wide">Rendez-vous</th>
			      </thead>
			      <tbody id="eachPlan">
			      </tbody>
    			</table>
    	   	</div>
    	  </div>
    	</div>
		<div class="ui segment">
    	  <h3 class="ui header">
		  <div id="delPLA" class="ui axxium tiny button" onclick='delPLA();'>Supprimer les traitements</div>
   			&nbsp;&nbsp;Total du plan de traitement :
    	    <div class="ui content" id="totPlan">
    	    </div>
    	  </h3>
    	</div>
    	<div class="ui two column grid">
    	  <div class="row">
    	    <div class="four wide column">
   				<img id="sigBelowPLA0" class="ui left floated medium image">
   			</div>
    	    <div class="four wide column">
   				<img id="sigBelowPLA1" class="ui left floated medium image">
   			</div>
   		  </div>
    	  <div class="row">
    	    <div class="four wide column">
    	    	<label id="dateBelowPLA0"></label>
   			</div>
    	    <div class="four wide column">
    	    	<label id="dateBelowPLA1"></label>
   			</div>
   		  </div>
   		</div>
    </div>

     <div class="ui bottom attached tab segment" data-tab="ententes">
    	<div class="ui one column grid">
    	  <div class="row">
    	    <div class="column">
			    <table id="entList" class="ui axxium sortable striped compact table segment">
			      <thead>
			      	<th class="one wide"><i class="remove icon"></i></th>
			        <th class="one wide">Versement</th>
			        <th class="one wide">Date</th>
			        <th class="one wide">Montant</th>
			        <th class="six wide">Note</th>
			        <th class="two wide">Modifier</th>
			      </thead>
			      <tbody id="eachEnt">
			      </tbody>
    			</table>
    	   	</div>
    	  </div>
    	</div>
		<div class="ui segment">
    	  <h3 class="ui header">
		  <div id="delRDV" class="ui axxium tiny button" onclick='delRDV();'>Supprimer les versements</div>
		  <div id="addRDV" class="ui axxium tiny button" onclick='addRDV();'>Ajouter un versement</div>
   			&nbsp;&nbsp;Total de l'entente :
    	    <div class="ui content" id="totEnt">
    	    </div>
    	  </h3>
    	</div>
    	<div class="ui two column grid">
    	  <div class="row">
    	    <div class="four wide column">
   				<img id="sigBelowENT0" class="ui left floated medium image">
   			</div>
    	    <div class="four wide column">
   				<img id="sigBelowENT1" class="ui left floated medium image">
   			</div>
   		  </div>
    	  <div class="row">
    	    <div class="four wide column">
    	    	<label id="dateBelowENT0"></label>
   			</div>
    	    <div class="four wide column">
    	    	<label id="dateBelowENT1"></label>
   			</div>
   		  </div>
   		</div>
    </div>

     <div class="ui bottom attached tab segment" data-tab="traitements">
    	<div class="ui one column grid">
    	  <div class="row">
    	    <div class="column">
			    <table id="traitList" class="ui axxium striped compact table segment">
			      <thead>
			      	<th class="one wide"><i class="remove icon"></i></th>
			        <th class="one wide">Code</th>
			        <th class="one wide">Dent</th>
			        <th class="one wide">Surf.</th>
			        <th class="twelve wide">Protocole</th>
			      </thead>
			      <tbody id="eachTrait">
			      </tbody>
    			</table>
    	   	</div>
    	  </div>
    	</div>
		<div class="ui segment">
    	  <h3 class="ui header">
		  <div id="delTrait" class="ui axxium tiny button" onclick='delTrait();'>Supprimer les traitements</div>
		  <div id="addTrait" class="ui axxium tiny button" onclick='addTrait();'>Ajouter un traitement</div>
    	  </h3>
    	</div>
    	<div class="ui two column grid">
    	  <div class="row">
    	    <div class="four wide column">
   				<img id="sigBelowTRA0" class="ui left floated medium image">
   			</div>
    	    <div class="four wide column">
   				<img id="sigBelowTRA1" class="ui left floated medium image">
   			</div>
   		  </div>
    	  <div class="row">
    	    <div class="four wide column">
    	    	<label id="dateBelowTRA0"></label>
   			</div>
    	    <div class="four wide column">
    	    	<label id="dateBelowTRA1"></label>
   			</div>
   		  </div>
   		</div>
    </div>

     <div class="ui bottom attached tab segment" data-tab="ordonnances">
    	<div class="ui one column grid">
    	  <div class="row">
    	    <div class="column">
			    <table id="ordList" class="ui axxium sortable striped compact table segment">
			      <thead>
			      	<th class="one wide"><i class="remove icon"></i></th>
			        <th class="four wide">Médicament</th>
			        <th class="one wide">Dose</th>
			        <th class="one wide">Qté</th>
			        <th class="one wide">Fréq</th>
			        <th class="four wide">Note</th>
			        <th class="two wide">Modifier</th>
			      </thead>
			      <tbody id="eachOrd">
			      </tbody>
    			</table>
    	   	</div>
    	  </div>
    	</div>
		<div class="ui segment">
    	  <h3 class="ui header">
		  <div id="delMED" class="ui axxium tiny button" onclick='delMED();'>Supprimer les médicaments</div>
		  <div id="addMED" class="ui axxium tiny button" onclick='addMED();'>Ajouter un médicament</div>
    	  </h3>
    	</div>
    	<div class="ui two column grid">
    	  <div class="row">
    	    <div class="four wide column">
   				<img id="sigBelowORD0" class="ui left floated medium image">
   			</div>
    	    <div class="four wide column">
   				<img id="sigBelowORD1" class="ui left floated medium image">
   			</div>
   		  </div>
    	  <div class="row">
    	    <div class="four wide column">
    	    	<label id="dateBelowORD0"></label>
   			</div>
    	    <div class="four wide column">
    	    	<label id="dateBelowORD1"></label>
   			</div>
   		  </div>
   		</div>
    </div>

     <div class="ui bottom attached tab segment" data-tab="documents">
    	<div class="ui one column grid">
    	  <div class="row">
    	    <div class="column">
			    <canvas id="pdf-canvas" style="border:1px solid black;"/>
    	   	</div>
    	  </div>
    	</div>
    	<div class="ui segment" id="noDocs"></div>
    	<div class="ui two column grid">
    	  <div class="row">
    	    <div class="four wide column">
   				<img id="sigBelowDOC0" class="ui left floated medium image">
   			</div>
    	    <div class="four wide column">
   				<img id="sigBelowDOC1" class="ui left floated medium image">
   			</div>
   		  </div>
    	  <div class="row">
    	    <div class="four wide column">
    	    	<label id="dateBelowDOC0"></label>
   			</div>
    	    <div class="four wide column">
    	    	<label id="dateBelowDOC1"></label>
   			</div>
   		  </div>
   		</div>
    </div>

	<div class="ui bottom attached tab segment" data-tab="odontos">
	      <div class="ui grid">
	          <div class="ten wide column">
					<canvas id="odonto" width="600" height="395" style="border:1px solid #c3c3c3;">
								Your browser does not support the HTML5 canvas tag.
					</canvas>
		  			<br>
					<div class="ui segment">
    				  <h3 class="ui header">
    				  <div id="delODO" class="ui axxium tiny button" onclick='delODO();'>Supprimer les traitements</div>
    				  </h3>
    				</div>
	          </div>
	          <div class="six wide column">
	          <div class="ui top attached tabular menu">
			    <div class="active item" data-tab="eb">En bouche</div>
			    <div class="item" data-tab="af">À faire</div>
			    <div class="item" data-tab="as">À surveiller</div>
			  </div>
			  <div class="ui bottom attached active tab segment" data-tab="eb">
	          	<table class="ui compact table">
	  				<thead>
	  				  <tr>
	  				  	<th class="one wide"><i class="remove icon"></i></th>
	  					<th><h4>Code</h4></th>
	  				    <th><h4>Dent</h4></th>
	  					<th><h4>Surface / Desc.</h4></th>
	  				  </tr>
	  				</thead>
	  				<tbody id="ebList">
	  				</tbody>
				</table>
			  </div>
			  <div class="ui bottom attached tab segment" data-tab="af">
	          	<table class="ui compact table">
	  				<thead>
	  				  <tr>
	  				  	<th class="one wide"><i class="remove icon"></i></th>
	  					<th><h4>Code</h4></th>
	  				    <th><h4>Dent</h4></th>
	  					<th><h4>Surface / Desc.</h4></th>
	  				  </tr>
	  				</thead>
	  				<tbody id="afList">
	  				</tbody>
				</table>
			  </div>
			  <div class="ui bottom attached tab segment" data-tab="as">
	          	<table class="ui compact table">
	  				<thead>
	  				  <tr>
	  				  	<th class="one wide"><i class="remove icon"></i></th>
	  					<th><h4>Code</h4></th>
	  				    <th><h4>Dent</h4></th>
	  					<th><h4>Surface / Desc.</h4></th>
	  				  </tr>
	  				</thead>
	  				<tbody id="asList">
	  				</tbody>
				</table>
			  </div>
	     </div>
     </div>
    	<div class="ui two column grid">
    	  <div class="row">
    	    <div class="four wide column">
   				<img id="sigBelowODO0" class="ui left floated medium image">
   			</div>
    	    <div class="four wide column">
   				<img id="sigBelowODO1" class="ui left floated medium image">
   			</div>
   		  </div>
    	  <div class="row">
    	    <div class="four wide column">
    	    	<label id="dateBelowODO0"></label>
   			</div>
    	    <div class="four wide column">
    	    	<label id="dateBelowODO1"></label>
   			</div>
   		  </div>
   		</div>
     </div>

</div>

	<div class="ui modalSign0 modal">
	  <i class="close icon"></i>
	  <div class="header" id="signHeader0">
	    <i class="write icon"></i>Signature
	  </div>
	  <div class="modSign0 content">
    	<div class="ui axxium form segment">
    	  <div id="signature0"></div>
	      <div class="ui axxium submit button" onclick="saveSign();">Valider</div>
    	</div>
	  </div>
	</div>

	<div class="ui modalSign1 modal">
	  <i class="close icon"></i>
	  <div class="header" id="signHeader1">
	    <i class="write icon"></i>Signature
	  </div>
	  <div class="modSign1 content">
	  	<div class="ui grid">
	  		<div class="ten wide column">
    		  <div id="signature1"></div>
	  		</div>
	  		<div class="one wide column">
	  		</div>
	  		<div class="five wide column">
	  			<div class="modNumP content">
  					<div class="ui axxium small button" onclick='keyEntryS(1);'><font size=6>1</font></div>
  					<div class="ui axxium small button" onclick='keyEntryS(2);'><font size=6>2</font></div>
  					<div class="ui axxium small button" onclick='keyEntryS(3);'><font size=6>3</font></div>
  					<br><br>
  					<div class="ui axxium small button" onclick='keyEntryS(4);'><font size=6>4</font></div>
  					<div class="ui axxium small button" onclick='keyEntryS(5);'><font size=6>5</font></div>
  					<div class="ui axxium small button" onclick='keyEntryS(6);'><font size=6>6</font></div>
  					<br><br>
  					<div class="ui axxium small button" onclick='keyEntryS(7);'><font size=6>7</font></div>
  					<div class="ui axxium small button" onclick='keyEntryS(8);'><font size=6>8</font></div>
  					<div class="ui axxium small button" onclick='keyEntryS(9);'><font size=6>9</font></div>
  					<br><br>
  					<div class="ui axxium small button" onclick='keyEntryS(-1);'><font size=6><</font></div>
  					<div class="ui axxium small button" onclick='keyEntryS(0);'><font size=6>0</font></div>
  					<div class="ui axxium small button" onclick='keyEntryS(-2);'><font size=6><<</font></div>
  					<br><br>
	  	    		<div class="ui axxium submit button" onclick="saveSign();">Valider</div>
	  			</div>
	  		</div>
    	  </div>
    	</div>
	  </div>
	</div>

	<div class="ui modalAnt modal">
	  <div class="ui header" id="antHeader">
	    <i class="write icon"></i>Questionnaire
	  </div>
	  <div class="modAnt content">
				<div id="qChoice" class="content">
					<h3 id="question" class="ui header"></h3>
    			</div>
				<div id="errMsg" class="content">
					<h3 id="errMsgTxt" class="ui red header"></h3>
    			</div>
  				<div id="nextButtonP" class="ui right floated segment">
  					<div id="buttonTxtP" class="ui axxium tiny button" onclick="goNext();">
  						Suivant
  					</div>
  				</div>
					<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
	  </div>
	</div>

	<div class="ui modalSearch modal">
	  <i class="close icon"></i>
	  <div class="header">
	    <i class="user icon"></i>Rechercher un patient
	  </div>
	  <div class="modSearch content">
    	<div class="ui axxium form segment">
    		<div class="ui one column grid">
    		  <div class="row">
    		    <div class="column">
    		    	<font size=2>
					    <table id="patList" class="ui celled table" cellspacing="0" width="100%">
					      <thead>
					        <th>Nom</th>
					        <th>Prénom</th>
					        <th>Numéro</th>
					        <th>NAM</th>
					        <th>Date de naissance</th>
					      </thead>
					      <tbody id="eachPat">
					      </tbody>
    					</table>
    				</font>
    		   	</div>
    		  </div>
    		  <div class="row">
    		    <div class="six wide column">
			    	    <div class="field">
			    	      <label>Fusion nouveau patient</label>
			    	      <input id="axxNumber" type="text" value="">
			    	    </div>
    		   	</div>
    		    <div class="six wide column">
			    	    <br><div id="addVisionR" class="ui axxium tiny button" onclick='getAxxium();'>Rechercher dans Vision-R</div>
    		   	</div>
    		  </div>

    		</div>
    	</div>
	  </div>
	</div>

	<div class="ui modalNumP modal">
	  <i class="close icon"></i>
  	  <div class="ui segment">
	  <div class="ui grid">
	  	<div class="one wide column">
	  	</div>
	  	<div class="five wide column">
	  		<div class="modNumP content">
  				<div class="ui manyeta small button" onclick='keyEntryP(1);'><font size=90>1</font></div>
  				<div class="ui manyeta small button" onclick='keyEntryP(2);'><font size=90>2</font></div>
  				<div class="ui manyeta small button" onclick='keyEntryP(3);'><font size=90>3</font></div>
  				<br><br>
  				<div class="ui manyeta small button" onclick='keyEntryP(4);'><font size=90>4</font></div>
  				<div class="ui manyeta small button" onclick='keyEntryP(5);'><font size=90>5</font></div>
  				<div class="ui manyeta small button" onclick='keyEntryP(6);'><font size=90>6</font></div>
  				<br><br>
  				<div class="ui manyeta small button" onclick='keyEntryP(7);'><font size=90>7</font></div>
  				<div class="ui manyeta small button" onclick='keyEntryP(8);'><font size=90>8</font></div>
  				<div class="ui manyeta small button" onclick='keyEntryP(9);'><font size=90>9</font></div>
  				<br><br>
  				<div class="ui manyeta small button" onclick='keyEntryP(-1);'><font size=90><</font></div>
  				<div class="ui manyeta small button" onclick='keyEntryP(0);'><font size=90>0</font></div>
  				<div class="ui manyeta small button" onclick='keyEntryP(-2);'><font size=90>.</font></div>
  				<br><br>
	  		  	<div id="acceptTxtP" class="ui button" onclick='changeValP();'>Accepter</div>
	  		  	<div id="clearTxtP" class="ui button" onclick='clearValP();'>Effacer</div>
	  		</div>
	  	</div>
	  	<div class="one wide column">
	  	</div>
	  	<div class="two wide column">
	  		<div id="keyDisplayP" class="ui header"><font size=120>&nbsp;</font></div>
	  		<div id="unitsP" class="ui small header"></div>
	  		<div id="validationErrorP" class="ui small red header"></div>
	  	</div>
	  </div>
	  </div>
	</div>

	<div class="ui modalSuivi modal">
	  <i class="close icon"></i>
	  <div class="header">
	    <i class="user icon"></i>Ajouter / modifier un suivi médical
	  </div>
	  <div class="modSuivi content">
    	<div class="ui axxium form segment">
    	    <div class="field">
    	      <label>Entrez un suivi médical</label>
    	      <input id="EsuiviM" type="text">
    	    </div>
	      <div class="ui axxium button" onclick="modifySuivi();">Valider</div>
    	</div>
	  </div>
	</div>

	<div class="ui modalAlert modal">
	  <i class="close icon"></i>
	  <div class="header">
	    <i class="user icon"></i>Ajouter / modifier une alerte médicale
	  </div>
	  <div class="modAlert content">
    	<div class="ui axxium form segment">
    	    <div class="field">
    	      <label>Entrez une alerte médicale</label>
    	      <input id="EalertM" type="text">
    	    </div>
	      <div class="ui axxium button" onclick="modifyAlert();">Valider</div>
    	</div>
	  </div>
	</div>

	<div class="ui modalDoc modal">
	  <i class="close icon"></i>
	  <div class="header">
	    <i class="user icon"></i>Ajouter un document
	  </div>
	  <div class="modDoc content">
    	<div class="ui axxium form segment">
    	    <div class="field">
    	      <label>Choisir un fichier</label>
    	      <input id="Efile" type="file">
    	    </div>
    	    <div class="field">
    	      <label>Entrez un commentaire</label>
    	      <input id="Ecomm" type="text">
    	    </div>
	      <div class="ui axxium submit button">Valider</div>
    	</div>
	  </div>
	</div>

	<div class="ui modalCorr modal">
	  <i class="close icon"></i>
	  <div class="header">
	    <i class="user icon"></i>Correction d'un traitement
	  </div>
	  <div class="modCorr content">
    	<div class="ui axxium form segment">
    	    <div class="field">
    	      <label>Entrez une correction</label>
    	      <input id="Ecorr" type="text">
    	    </div>
	      <div class="ui axxium submit button">Valider</div>
    	</div>
	  </div>
	</div>

	<div class="ui modalNote modal">
	  <i class="close icon"></i>
	  <div class="header">
	    <i class="user icon"></i>Notes et corrections
	  </div>
	  <div class="modNote content">
    	<div class="ui axxium form segment">
    	    <div class="field">
    	      <label>Entrez une note ou une correction</label>
    	      <input id="Enote" type="text">
    	    </div>
	      <div class="ui axxium submit button">Valider</div>
    	</div>
	  </div>
	</div>

	<div class="ui modalNote2 modal">
	  <i class="close icon"></i>
	  <div class="header">
	    <i class="user icon"></i>Notes et corrections
	  </div>
	  <div class="modNote2 content">
    	<div class="ui axxium form segment">
    	    <div class="field">
    	      <label>Entrez une note ou une correction</label>
    	      <input id="Enote2" type="text">
    	    </div>
	      <div class="ui axxium submit button">Valider</div>
    	</div>
	  </div>
	</div>

	<div class="ui modalRep2 modal">
	  <i class="close icon"></i>
	  <div class="header">
	    <i class="user icon"></i>Réponse
	  </div>
	  <div class="modRep2 content">
    	<div class="ui axxium form segment">
    	    <div class="field">
    	      <label>Entrez une réponse</label>
    	      <input id="Erep2" type="text">
    	    </div>
	      <div class="ui axxium submit button">Valider</div>
    	</div>
	  </div>
	</div>

	<div class="ui modalMontant modal">
	  <i class="close icon"></i>
	  <div class="header">
	    <i class="user icon"></i>Modifier un versement
	  </div>
	  <div class="modMontant content">
    	<div class="ui axxium form segment">
    	  <div class="two fields">
    	    <div class="field">
    	      <label>Date du versement</label>
    	      <input id="EdateV" type="text">
    	    </div>
    	    <div class="field">
    	      <label>Entrez un montant</label>
    	      <input id="Emontant" type="text">
    	    </div>
    	  </div>
    	    <div class="field">
    	      <label>Commentaires</label>
    	      <input id="EnoteV" type="text">
    	    </div>
	      <div class="ui axxium submit button">Valider</div>
    	</div>
	  </div>
	</div>

	<div class="ui modalMed modal">
	  <i class="close icon"></i>
	  <div class="header">
	    <i class="user icon"></i>Ajouter / modifier un médicament
	  </div>
	  <div class="modMed content">
    	<div class="ui axxium form segment">
    	  <div class="two fields">
    	    <div class="field">
    	      <label>Médicament</label>
    	      <input id="EmedR" type="text">
    	    </div>
    	    <div class="field">
    	      <label>Dose</label>
    	      <input id="EdoseR" type="text">
    	    </div>
    	  </div>
    	  <div class="two fields">
    	    <div class="field">
    	      <label>Quantité</label>
    	      <input id="EqtyR" type="text">
    	    </div>
    	    <div class="field">
    	      <label>Fréquence</label>
    	      <input id="EfreqR" type="text">
    	    </div>
    	  </div>
    	    <div class="field">
    	      <label>Note</label>
    	      <input id="EnoteR" type="text">
    	    </div>
	      <div class="ui axxium submit button">Valider</div>
    	</div>
	  </div>
	</div>

	<div class="ui modalAxxium modal">
	  <i class="close icon"></i>
	  <div class="header">
	    <i class="user icon"></i>Dossier patient de Vision-R
	  </div>
	  <div class="modAxxium content">
    	<div class="ui axxium form segment">
    	  <div class="two fields">
    			    <div class="field">
    			      <label>Nom du patient</label>
    			      <input id="ElastA" readonly="" type="text">
    			    </div>
    			    <div class="field">
    			      <label>Prénom du patient</label>
    			      <input id="EfirstA" readonly="" type="text">
    			    </div>
    	  </div>
    	  <div class="three fields">
    			    <div class="field">
    			      <label>Numéro de dossier</label>
    			      <input id="EIDA" readonly="" type="text">
    			    </div>
    			    <div class="field">
    			      <label>NAM</label>
    			      <input id="ENAMA" readonly="" type="text">
    			    </div>
    			    <div class="field">
    			      <label>Date de naissance</label>
    			      <input id="EbirthA" readonly="" type="text">
    			    </div>
    	  </div>
	      <div class="ui axxium submit button" onclick="addAxxium();">Ajouter</div>
	      <div class="ui axxium cancel button" onclick="cancelAxxium();">Cancel</div>
    	</div>
	  </div>
	</div>

	<div class="ui modalOne modal">
	  <br><br>
	  <div class="ui grid">
	  	<div class="one wide column">
	  	</div>
	  	<div class="eight wide column">
			<br>
	  		<div class="field">
	  			<font size=6><textarea rows="2" cols="38" readonly="" id="text42"></textarea></font>
	  		</div>
	  	</div>
	  </div>
	  <div class="ui grid">
	  	<div class="one wide column">
	  	</div>
	  	<div class="two wide column">
					<div id="theTooth1" class="field">
					  <font size=5></font>
					</div>
  				<br>
	  			<div class="ui axxium large fluid button" onclick='setM();' id="butM"><font size=5>M</font></div>
  				<br>
	  			<div class="ui axxium large fluid button" onclick='setL();' id="butL"><font size=5>L</font></div>
  				<br>
	  			<div class="ui axxium large fluid button" onclick='setD();' id="butD"><font size=5>D</font></div>
  				<br>
	  			<div class="ui axxium large fluid button" onclick='setB();' id="butB"><font size=5>B</font></div>
  				<br>
	  			<div class="ui axxium large fluid button" onclick='setO();' id="butO"><font size=5>O</font></div>
  				<br>
	  			<div class="ui axxium large fluid button" onclick='set6();' id="butS" style:"visibility:hidden"><font size=5>6</font></div>
	  	</div>
	  	<div class="one wide column">
	  	</div>
	  	<div class="five wide column">
  <div class="ui search">
    <div class="ui icon input">
      <input class="prompt" type="text" placeholder="Rechercher..." id="searchField">
      <i class="search icon"></i>
    </div>
    <div class="results"></div>
  </div>
  				<br><br>
	  			<div class="ui axxium large fluid button" onclick='setAmal();' id="butAmal"><font size=5>Amalgame</font></div>
  				<br>
	  			<div class="ui axxium large fluid button" onclick='setComp();' id="butComp"><font size=5>Composite</font></div>
  				<br>
	  			<div class="ui axxium large fluid button" onclick='set1();' id="butOr"><font size=5>Examen complet</font></div>
  				<br>
	  			<div class="ui axxium large fluid button" onclick='set2();' id="butRes"><font size=5>Examen de rappel</font></div>
  				<br>
	  		<div class="field">
	  			<label><h3>Commentaires</h3></label>
    	    	<font size=6><input id="EnoteT" type="text"></font>
	  		</div>
  				<br>
	  	</div>
	  	<div class="one wide column">
	  	</div>
	  	<div class="six wide column">
	  		<div class="modNum content">
  				<div class="ui axxium large button" onclick='keyEntry(1);'><font size=8>1</font></div>
  				<div class="ui axxium large button" onclick='keyEntry(2);'><font size=8>2</font></div>
  				<div class="ui axxium large button" onclick='keyEntry(3);'><font size=8>3</font></div>
  				<br><br>
  				<div class="ui axxium large button" onclick='keyEntry(4);'><font size=8>4</font></div>
  				<div class="ui axxium large button" onclick='keyEntry(5);'><font size=8>5</font></div>
  				<div class="ui axxium large button" onclick='keyEntry(6);'><font size=8>6</font></div>
  				<br><br>
  				<div class="ui axxium large button" onclick='keyEntry(7);'><font size=8>7</font></div>
  				<div class="ui axxium large button" onclick='keyEntry(8);'><font size=8>8</font></div>
  				<div class="ui axxium large button" onclick='keyEntry(9);'><font size=8>9</font></div>
  				<br><br>
  				<div class="ui axxium large button" onclick='keyEntry(-1);'><font size=8><</font></div>
  				<div class="ui axxium large button" onclick='keyEntry(0);'><font size=8>0</font></div>
  				<div class="ui axxium large button" onclick='keyEntry(-2);'><font size=8>c</font></div>
  				<br><br>
	  		  	<div id="existTxt" class="ui axxium large button" onclick='acceptVal1(0);'><font size=5>EB</font></div>
	  		  	<div id="todoTxt" class="ui axxium large button" onclick='acceptVal1(1);'><font size=5>AF</font></div>
	  		  	<div id="doneTxt" class="ui axxium large button" onclick='acceptVal1(2);'><font size=5>AS</font></div>
  				<br><br>
	  		</div>
	  	</div>
	  </div>
	</div>

	<div class="ui modalTwo modal">
	  <br><br>
	  <div class="ui grid">
	  	<div class="one wide column">
	  	</div>
	  	<div class="nine wide column">
	  		<div class="field">
	  			<label><h3>Description</h3></label>
	  			<font size=6><textarea rows="4" cols="24" id="text422" readonly=""></textarea></font>
	  		</div>
	  		<br>
  			<div class="ui search">
  			  <div class="ui icon input">
  			    <input class="prompt" type="text" placeholder="Rechercher..." id="searchField2">
  			    <i class="search icon"></i>
  			  </div>
  			  <div class="results"></div>
  			</div>
  			<br>
	  		<div class="ui grid">
	  			<div class="five wide column">
	  				<div class="field">
	  					<label><h3>Dent</h3></label>
    	    			<font size=6><input id="EtoothT2" size="6" type="text"></font>
	  				</div>
	  			</div>
	  			<div class="five wide column">
	  				<div class="field">
	  					<label><h3>Surfaces</h3></label>
    	    			<font size=6><input id="EsurfT2" size="6" type="text"></font>
	  				</div>
	  			</div>
	  		</div>
	  		<br>
	  		<div class="field">
	  			<label><h3>Protocole de traitement&nbsp;&nbsp;&nbsp;<div id="traitProt" class="ui axxium tiny button" onclick='startProt();'>
	  			<font size=3>Éditer</font></div></h3></label>
	  			<font size=3><textarea rows="6" cols="60" id="totTxt"></textarea></font>
	  		</div>
	  	</div>
	  	<div class="six wide column">
	  		<br><br>
	  		<div class="modNum content">
  				<div class="ui axxium large button" onclick='keyEntry2(1);'><font size=8>1</font></div>
  				<div class="ui axxium large button" onclick='keyEntry2(2);'><font size=8>2</font></div>
  				<div class="ui axxium large button" onclick='keyEntry2(3);'><font size=8>3</font></div>
  				<br><br>
  				<div class="ui axxium large button" onclick='keyEntry2(4);'><font size=8>4</font></div>
  				<div class="ui axxium large button" onclick='keyEntry2(5);'><font size=8>5</font></div>
  				<div class="ui axxium large button" onclick='keyEntry2(6);'><font size=8>6</font></div>
  				<br><br>
  				<div class="ui axxium large button" onclick='keyEntry2(7);'><font size=8>7</font></div>
  				<div class="ui axxium large button" onclick='keyEntry2(8);'><font size=8>8</font></div>
  				<div class="ui axxium large button" onclick='keyEntry2(9);'><font size=8>9</font></div>
  				<br><br>
  				<div class="ui axxium large button" onclick='keyEntry2(-1);'><font size=8><</font></div>
  				<div class="ui axxium large button" onclick='keyEntry2(0);'><font size=8>0</font></div>
  				<div class="ui axxium large button" onclick='keyEntry2(-2);'><font size=8>c</font></div>
  				<br><br>
  				<br><br>
	  		  	<div id="traitTxt2" class="ui axxium large button" onclick='acceptVal2();'><font size=5>Ajouter</font></div>
	  		  	<div id="clearTxt2" class="ui axxium large button" onclick='clearVal2();'><font size=5>Cancel</font></div>
  				<br><br><br><br>
	  		</div>
	  	</div>
	  </div>
	</div>

	<div class="ui modalProts fullscreen long modal">
	  <i class="close icon"></i>
	  <div id="protHeader" class="header">
	    <i class="treatment icon"></i>Protocoles
	  </div>
	  <div class="modProts content">
    	<div class="ui axxium form segment">
    		<div id="pB1" class="ui axxium small button" onclick="displayProts('Diagnostic');">DIAGN</div>
    		<div id="pB2" class="ui axxium small button" onclick="displayProts('Prévention');">PRÉV</div>
    		<div id="pB3" class="ui axxium small button" onclick="displayProts('Anesthésie');">ANESTH</div>
    		<div id="pB4" class="ui axxium small button" onclick="displayProts('Endodontie');">ENDO</div>
    		<div id="pB5" class="ui axxium small button" onclick="displayProts('Occlusion');">D.O</div>
    		<div id="pB6" class="ui axxium small button" onclick="displayProts('Chirurgie');">CHIR</div>
    		<div id="pB7" class="ui axxium small button" onclick="displayProts('Parodontie');">PARO</div>
    		<div id="pB8" class="ui axxium small button" onclick="displayProts('Orthodontie');">ORTHO</div>
    		<div id="pB9" class="ui axxium small button" onclick="displayProts('Prothèses amovibles');">PPA</div>
    		<div id="pB10" class="ui axxium small button" onclick="displayProts('Prothèses fixes');">PPF</div>
    		<div id="pB11" class="ui axxium small button" onclick="displayProts('Implant');">IMPLANT</div>
    		<table id="protTable" class="ui celled table">
			  <tbody id="eachProtRow">
			  </tbody>
			</table>
			<div class="ui axxium small button" onclick="acceptProts();">Valider</div>
    	</div>
	  </div>
	</div>

	<div class="ui modalNoteProt modal">
	  <i class="close icon"></i>
	  <div class="header">
	    <i class="user icon"></i>Notes et commentaires
	  </div>
	  <div class="modNoteProt content">
    	<div class="ui axxium form segment">
    	    <div class="field">
    	      <label>Entrez une note ou un commentaire</label>
    	      <input id="EnoteProt" type="text">
    	    </div>
	      <div class="ui axxium submit button">Valider</div>
    	</div>
	  </div>
	</div>

	<script>

	$('.modNoteProt.content .ui.form')
		    .form({
		    fields : {
		        just: {
		          identifier  : 'Enote',
		          rules: [
		            {
		              type   : 'empty',
		              prompt : 'Entrez une note ou un commentaire'
		            }
		          ]
		        }
		      }, onSuccess : function() {
            		//alert(curType);
            		pResp[curKind][curType] = document.getElementById("EnoteProt").value;
            		document.getElementById(curType).innerHTML = '<i class="icon checkmark"></i> <b>' + curProtName + " : " + document.getElementById("EnoteProt").value + '</b>'
            		$('.modalNoteProt.modal').modal('hide');
        		}
        	});

	function modSuivi()
	{
		document.getElementById("EsuiviM").value = "";
  		var cPat = 0;
  		for (pat in qPAT.patients)
  		{
  			if (curPatient == qPAT.patients[pat].id) curSuivi = pat;
  		}
  		if (qPAT.patients[curSuivi].suivi)
  		{
  			document.getElementById("EsuiviM").value = qPAT.patients[curSuivi].suivi;
  		}
		$('.modalSuivi.modal').modal('show');
	}

	function modifySuivi()
	{
        			patSuivi = { };
  					patSuivi["id"] = qPAT.patients[curSuivi].id;
  					patSuivi["first"] = qPAT.patients[curSuivi].first;
  					patSuivi["last"] = qPAT.patients[curSuivi].last;
  					patSuivi["NAM"] = qPAT.patients[curSuivi].NAM;
  					patSuivi["birth"] = qPAT.patients[curSuivi].birth;
  					if (qPAT.patients[curSuivi].alert) patSuivi["alert"] = qPAT.patients[curSuivi].alert;
        			patSuivi["suivi"] = document.getElementById("EsuiviM").value;
  					qFilePat = qPAT.patients[curSuivi].file;
        			//alert("modSuivi: "+qFilePat);
        			$.post("allScriptsv1.py", {tx: "uploadJSONsub", sub: "patients", name: qFilePat, json: JSON.stringify(patSuivi)}, function(result){
            			//alert("Le patient a été enregistré. "+curAlert);
            			document.getElementById("Esuivi").value = document.getElementById("EsuiviM").value;
  						//Centre dentaire Sirois<br>100001 - Claude Arsenault, 1946-07-12&nbsp;&nbsp;&nbsp;&nbsp;
  						var topPat = 'JS&nbsp;&nbsp;&nbsp;<div class="ui axxium tiny button" onclick="reOpenSearch();">Changer de patient</div>&nbsp;&nbsp;&nbsp;'+patAlert["id"]+' - '+curName+', '+birth+'&nbsp;&nbsp;&nbsp;<div class="ui axxium tiny button" onclick="window.print();">Imprimer</div>';
  						if (document.getElementById("Ealert").value.length > 0)
  						{
  							topPat = topPat + '<br><i class="red first aid icon"></i>&nbsp;&nbsp;Alerte : ' + document.getElementById("Ealert").value;
  						}
  						//alert(curPatRow);
  						qPAT.patients[curPatRow].suivi = document.getElementById("Esuivi").value;
  						document.getElementById("patName").innerHTML = topPat;
        			});
            		$('.modalSuivi.modal').modal('hide');
    }

	function modAlert()
	{
		document.getElementById("EalertM").value = "";
  		var cPat = 0;
  		for (pat in qPAT.patients)
  		{
  			if (curPatient == qPAT.patients[pat].id) curAlert = pat;
  		}
  		if (qPAT.patients[curAlert].alert)
  		{
  			document.getElementById("EalertM").value = qPAT.patients[curAlert].alert;
  		}
		$('.modalAlert.modal').modal('show');
	}

	function modifyAlert()
	{
        			patAlert = { };
  					patAlert["id"] = qPAT.patients[curAlert].id;
  					patAlert["first"] = qPAT.patients[curAlert].first;
  					patAlert["last"] = qPAT.patients[curAlert].last;
  					patAlert["NAM"] = qPAT.patients[curAlert].NAM;
  					patAlert["birth"] = qPAT.patients[curAlert].birth;
        			patAlert["alert"] = document.getElementById("EalertM").value;
  					if (qPAT.patients[curAlert].suivi) patAlert["suivi"] = qPAT.patients[curAlert].suivi;
  					qFilePat = qPAT.patients[curAlert].file;
        			//alert("modAlert: "+qFilePat);
        			$.post("allScriptsv1.py", {tx: "uploadJSONsub", sub: "patients", name: qFilePat, json: JSON.stringify(patAlert)}, function(result){
            			//alert("Le patient a été enregistré. "+curAlert);
            			document.getElementById("Ealert").value = document.getElementById("EalertM").value;
  						//Centre dentaire Sirois<br>100001 - Claude Arsenault, 1946-07-12&nbsp;&nbsp;&nbsp;&nbsp;
  						var topPat = 'JS&nbsp;&nbsp;&nbsp;<div class="ui axxium tiny button" onclick="reOpenSearch();">Changer de patient</div>&nbsp;&nbsp;&nbsp;'+patAlert["id"]+' - '+curName+', '+birth+'&nbsp;&nbsp;&nbsp;<div class="ui axxium tiny button" onclick="window.print();">Imprimer</div>';
  						if (document.getElementById("Ealert").value.length > 0)
  						{
  							topPat = topPat + '<br><i class="red first aid icon"></i>&nbsp;&nbsp;Alerte : ' + document.getElementById("Ealert").value;
  						}
  						//alert(curPatRow);
  						qPAT.patients[curPatRow].alert = document.getElementById("Ealert").value;
  						document.getElementById("patName").innerHTML = topPat;
        			});
            		$('.modalAlert.modal').modal('hide');
    }

	function addDoc(aNum)
	{
		document.getElementById("Ecomm").value = "";
		document.getElementById("Efile").value = "";
		$('.modalDoc.modal').modal('show');
	}

	$('.modDoc.content .ui.form')
		    .form({
		    fields : {
		        dFile: {
		          identifier  : 'Efile',
		          rules: [
		            {
		              type   : 'empty',
		              prompt : 'Choisir un fichier à ajouter'
		            }
		          ]
		        },
		        dComm: {
					identifier  : 'Ecomm',
					rules: [
					  {
					    type   : 'empty',
						prompt : 'Entrez un commentaire'
					  }
				   ]
		        }
		      }, onSuccess : function() {
            		alert(document.getElementById("Efile").value);
            		uploadDOC(document.getElementById("Efile").value);
            		$('.modalDoc.modal').modal('hide');
        		}
        	});

	$('.modCorr.content .ui.form')
		    .form({
		    fields : {
		        just: {
		          identifier  : 'Ecorr',
		          rules: [
		            {
		              type   : 'empty',
		              prompt : 'Entrez une correction'
		            }
		          ]
		        }
		      }, onSuccess : function() {
            		//alert(modalCorr);
            		qTRA.done[modalCorr]["corr"] = document.getElementById("Ecorr").value;
            		document.getElementById("dTRA"+modalCorr).innerHTML = document.getElementById("dTRA"+modalCorr).innerHTML + "<br>" + document.getElementById("Ecorr").value;
            		uploadTRA(qFileTrait);
            		$('.modalCorr.modal').modal('hide');
        		}
        	});

	function addNotes(aNum)
	{
		modalNum = aNum;
        //alert(modalNum);
		document.getElementById("Enote").value = "";
		$('.modalNote.modal').modal('show');
	}

	$('.modNote.content .ui.form')
		    .form({
		    fields : {
		        just: {
		          identifier  : 'Enote',
		          rules: [
		            {
		              type   : 'empty',
		              prompt : 'Entrez une note ou une correction'
		            }
		          ]
		        }
		      }, onSuccess : function() {
            		//alert(modalNum);
            		if (qJSON[modalNum].qEdits.length > 0)
            			{
            				qJSON[modalNum].qEdits = qJSON[modalNum].qEdits + "<br>" + document.getElementById("Enote").value;
            			}
            		else
            			{
            				qJSON[modalNum].qEdits = document.getElementById("Enote").value;
            			}
            		document.getElementById("n"+modalNum).innerHTML = qJSON[modalNum].qEdits;
            		uploadANT(qFile);
            		$('.modalNote.modal').modal('hide');
        		}
        	});

	function addNotes2(aNum)
	{
		modalNum2 = aNum;
        //alert(modalNum2);
		document.getElementById("Enote2").value = "";
		$('.modalNote2.modal').modal('show');
	}

	$('.modNote2.content .ui.form')
		    .form({
		    fields : {
		        just: {
		          identifier  : 'Enote2',
		          rules: [
		            {
		              type   : 'empty',
		              prompt : 'Entrez une note ou une correction'
		            }
		          ]
		        }
		      }, onSuccess : function() {
            		//alert(modalNum2);
            		if (qEXA[modalNum2].qEdits.length > 0)
            			{
            				qEXA[modalNum2].qEdits = qEXA[modalNum2].qEdits + "<br>" + document.getElementById("Enote2").value;
            			}
            		else
            			{
            				qEXA[modalNum2].qEdits = document.getElementById("Enote2").value;
            			}
            		document.getElementById("m"+modalNum2).innerHTML = qEXA[modalNum2].qEdits;
            		uploadEXA(qFileExa);
            		$('.modalNote2.modal').modal('hide');
        		}
        	});

	function addRep2(aNum)
	{
		modalRep2 = aNum;
        //alert(modalRep2);
		document.getElementById("Erep2").value = "";
		$('.modalRep2.modal').modal('show');
	}

	$('.modRep2.content .ui.form')
		    .form({
		    fields : {
		        just: {
		          identifier  : 'Erep2',
		          rules: [
		            {
		              type   : 'empty',
		              prompt : 'Entrez une réponse'
		            }
		          ]
		        }
		      }, onSuccess : function() {
            		//alert(modalRep2);
            		document.getElementById("r"+modalRep2).setAttribute("class", "ui axxium large right floated");
            		document.getElementById("r"+modalRep2).setAttribute("onclick", "");
            		document.getElementById("r"+modalRep2).innerHTML = "<b>" + document.getElementById("Erep2").value + "</b>"  + '<div id="r'+extIDexa+'" class="ui axxium large right floated button" onclick="addRep2(\''+extIDexa+'\');">Réponse</div></td>';
            		if (qEXA[modalRep2].qEdits.length > 0)
            			{
            				qEXA[modalRep2].qEdits = qEXA[modalNum2].qEdits + "<br>" + document.getElementById("Erep2").value;
            			}
            		else
            			{
            				qEXA[modalRep2].qEdits = document.getElementById("Erep2").value;
            			}
            		uploadEXA(qFileExa);
            		$('.modalRep2.modal').modal('hide');
        		}
        	});

	$('.modMontant.content .ui.form')
		    .form({
		    fields : {
		        montV: {
		          identifier  : 'Emontant',
		          rules: [
		            {
		              type   : 'number',
		              prompt : 'Entrez un montant'
		            }
		          ]
		        },
		        dateV: {
					identifier  : 'EdateV',
					rules: [
					  {
					    type   : 'empty',
						prompt : 'Entrez une date'
					  }
				   ]
		        }
		      }, onSuccess : function() {
            		//alert(modalMontant);
            		document.getElementById("wd"+modalMontant).innerHTML = document.getElementById("EdateV").value;
            		qENT.pay[modalMontant]["date"] = document.getElementById("EdateV").value;
            		document.getElementById("wm"+modalMontant).innerHTML = document.getElementById("Emontant").value;
            		qENT.pay[modalMontant]["montant"] = parseInt(document.getElementById("Emontant").value);
            		document.getElementById("wn"+modalMontant).innerHTML = document.getElementById("EnoteV").value;
            		qENT.pay[modalMontant]["note"] = document.getElementById("EnoteV").value;
  					uploadENT(qFileEnt);
      				document.getElementById("totEnt").innerHTML = "";
      				totEnt = 0;
      				for (tt in qENT.pay)
      					{
    						totEnt = totEnt + qENT.pay[tt]["montant"];
    					}
      				document.getElementById("totEnt").innerHTML = totEnt+" $";
            		$('.modalMontant.modal').modal('hide');
        		}
        	});

	$('.modMed.content .ui.form')
		    .form({
		    fields : {
		        medR: {
		          identifier  : 'EmedR',
		          rules: [
		            {
		              type   : 'empty',
		              prompt : 'Entrez un médicament'
		            }
		          ]
		        },
		        doseR: {
					identifier  : 'EdoseR',
					rules: [
					  {
					    type   : 'empty',
						prompt : 'Entrez une dose'
					  }
				   ]
		        },
		        qtyR: {
					identifier  : 'EqtyR',
					rules: [
					  {
					    type   : 'empty',
						prompt : 'Entrez une quantité'
					  }
				   ]
		        },
		        freqR: {
					identifier  : 'EfreqR',
					rules: [
					  {
					    type   : 'empty',
						prompt : 'Entrez une fréquence'
					  }
				   ]
		        }
		      }, onSuccess : function() {
            		//alert(modalMontant);
            		if (modalMedAdd)
            		{
    					div = document.createElement("tr");
    					div.setAttribute("id", "ORD"+modalMed);
    					div.innerHTML = '<td><h4><input id="xORD'+modalMed+'" type="checkbox" tabindex="'+modalMed+'" class="hidden"></h4></td><td id="rm'+modalMed+'"><h4></h4></td><td id="rd'+modalMed+'"><h4></h4></td><td id="rq'+modalMed+'"><h4></h4></td><td id="rf'+modalMed+'"><h4></h4></td><td id="rn'+modalMed+'"><h4></h4></td><td><h4><div class="ui axxium tiny button" onclick="modMed('+modalMed+');">Modifier</div></h4></td>';
    					document.getElementById("eachOrd").appendChild(div);
            		}
            		document.getElementById("rm"+modalMed).innerHTML = document.getElementById("EmedR").value;
            		qORD.meds[modalMed]["med"] = document.getElementById("EmedR").value;
            		document.getElementById("rd"+modalMed).innerHTML = document.getElementById("EdoseR").value;
            		qORD.meds[modalMed]["dose"] = document.getElementById("EdoseR").value;
            		document.getElementById("rq"+modalMed).innerHTML = document.getElementById("EqtyR").value;
            		qORD.meds[modalMed]["qty"] = document.getElementById("EqtyR").value;
            		document.getElementById("rf"+modalMed).innerHTML = document.getElementById("EfreqR").value;
            		qORD.meds[modalMed]["freq"] = document.getElementById("EfreqR").value;
            		document.getElementById("rn"+modalMed).innerHTML = document.getElementById("EnoteR").value;
            		qORD.meds[modalMed]["note"] = document.getElementById("EnoteR").value;
  					uploadORD(qFileOrd);
            		$('.modalMed.modal').modal('hide');
        		}
        	});

	</script>

  <script>

  var lang = getLang();
  var curPatient = "";
  var curPatRow = "";
  var curName = "";
  var curDentist = "DR JEAN YVES SIROIS";
  var curInitials = "JS";
  var curAnt = 0;
  var curExa = 0;
  var curPlan = 0;
  var curTrait = 0;
  var curEnt = 0;
  var curOrd = 0;
  var curDoc = 0;
  var curLoad = "examens";
  var curPrefix = "E";
  var curAlert = 0;
  var tracks42 = "";
  var aTooth = 0;
  var trait = 0;
  var isM = false;
  var isL = false;
  var isD = false;
  var isB = false;
  var isO = false;
  var mapping = "";
  var odonto = "";
  var searchItems = "";
  var inTrait = false;
  var qFilePat = "";
  var qFile = "";
  var qFileExa = "";
  var qFilePlan = "";
  var qFileTrait = "";
  var qFileEnt = "";
  var qFileOrd = "";
  var qFileDoc = "";
  //var firstJSON = getJSON();
  var modalNum = 0;
  var extID;
  var extIDexa;
  var allJSONs = "";
  var allEXAMSs = "";
  var qCODES = "";
  var qJSON = "";
  var firstJSON = "AXXAv4";
  var forceMustSee = false;
  var forceMustSeeExa = false;
  loadQJSON(firstJSON);
  var firstEXA = "AXXEv3";
  loadQEXA(firstEXA);
  var qANT = "";
  var qEXAMS = "";
  var qEXA = "";
  var qODONS = "";
  var qODO = "";
  var qPAT = "";
  var qPLANS = "";
  var qPLA = "";
  var qENTS = "";
  var qENT = "";
  var qTRAS = "";
  var qTRA = "";
  var qORDS = "";
  var qORD = "";
  var qDOCS = "";
  var qDOC = "";
  var firstSign0 = true;
  var firstSign1 = true;
  var firstSignPad = true;
  var signID = "";
  var showAdult = true;
  var curKind = "";
  var curType = "";
  var curProtName = "";
  var pMaster = { };
  var pResp = { };
  var protAdd = true;
  var isLockedODO = false;
  var isLockedPLA = false;
  var isLockedENT = false;
  var isLockedTRA = false;
  var isLockedORD = false;

  $('document').ready(function(){
  	$('.menu .item')
  		.tab()
	;
	$('.sortable.table').tablesort();
	$('.modalProts.modal')
		  .modal({
		    allowMultiple: true
		  })
		;
	$('.modalNoteProt.modal')
		  .modal({
		    allowMultiple: true
		  })
	;
	loadCODES();
    loadProts();
  	loadPAT();
  });

  $("#odonto").on('mouseup', function(evt) {
  	if (!isLockedODO)
  	{
      if (evt.target.getAttribute('id') == "odonto")
    	{
    		aTooth = getTooth(evt.clientX, evt.clientY);
    		//alert(aTooth);
    		document.getElementById("theTooth1").innerHTML = "<font size=5>Dent "+aTooth+"</font>";
    		document.getElementById("text42").disabled=true;
    		document.getElementById("EnoteT").value="";
    		if (aTooth % 10 > 3)
    		{
    			resetMLDBO();
    		}
    		else
    		{
    			reset12345();
    		}
  			inTrait = false;
    		$('.modalOne.modal').modal('show');
    	}
  	}
  });

  $("#odonto").on('touchend', function(evt) {
  	if (!isLockedODO)
  	{
      if (evt.originalEvent.changedTouches[0].target.getAttribute('id') == "odonto")
    	{
    		aTooth = getTooth(evt.originalEvent.changedTouches[0].clientX, evt.originalEvent.changedTouches[0].clientY);
    		//alert(aTooth);
    		document.getElementById("theTooth1").innerHTML = "<font size=4>Dent "+aTooth+"</font>";
    		document.getElementById("text42").disabled=true;
    		document.getElementById("EnoteT").value="";
    		if (aTooth % 10 > 3)
    		{
    			resetMLDBO();
    		}
    		else
    		{
    			reset12345();
    		}
  			inTrait = false;
    		$('.modalOne.modal').modal('show');
    	}
    }
  });

  </script>

</body>
</html>